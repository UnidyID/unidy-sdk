## Pre-commit Checklist

- Use biome to lint/format before pushing code
- Run `bun run build` inside of packages/sdk if you changed any code inside to regenerate potential changes in README.md files generated by Stencil
- Try to run the e2e tests locally to confirm that they are still passing

## Commit Guidelines

- Use conventional commit messages (prefix messages with `fix:`, `feat:`, `refactor:`, `docs:` etc.)
- Do not add a "Co-Authored-By: Claude" footer to commits
- When creating PRs, always assign @me and add reviewers: bvogel,Zeko369,MandyGottschling,Sokre95 excluding the current user from this list

## Code Quality

- Stop making more suggestions after your suggestions have been rejected or rolled back twice, rather ask for user guidance
- When touching front end code that is user facing test it for accessibility and adjust it to be WCAG 2.1 AA compliant
- If keys are added to locale files always respect alphabetical order

## Documentation & Test Coverage Standards

When adding or modifying Stencil components, ensure the following before committing:

### JSDoc Documentation
Every `@Prop`, `@Event`, and public `@Method` must have a JSDoc comment describing its purpose:

```tsx
/** CSS classes to apply to the button element. */
@Prop({ attribute: "class-name" }) componentClassName = "";

/** The action this button performs: "connect" to proceed, "cancel" to abort. */
@Prop() action: "connect" | "cancel" = "connect";

/** Fired on successful authorization. Contains token and redirect URL. */
@Event() oauthSuccess!: EventEmitter<OAuthSuccessEvent>;

/** Initiates the OAuth authorization flow. */
@Method()
async authorize(): Promise<void> { ... }
```

### README Generation
After adding JSDoc comments, run `bun run build` in packages/sdk. Stencil auto-generates README.md files with property/event/method tables from your JSDoc. Verify the generated README includes descriptions for all documented items.

### Demo Pages
New components or features should have a demo page in `packages/sdk/src/`:
- Add HTML file (e.g., `src/oauth/index.html`)
- Register in `stencil.config.ts` under `www.copy`
- Add route to `e2e/config.ts`

### E2E Test Coverage
New features require e2e tests covering:
- Component renders correctly
- User interactions work (buttons, inputs, form submissions)
- Both authenticated and unauthenticated states (where applicable)
- Error states and edge cases

Test file location: `packages/sdk/e2e/spec/<feature>/<test-name>.spec.ts`

## Stencil Store Reactivity

`@stencil/store` handles reactivity automatically. Access store state directly in the render method - re-renders trigger automatically when state changes. See https://stenciljs.com/docs/v2/stencil-store#storestate

```tsx
// âœ… Stencil handles reactivity
render() {
  if (authState.step === "email") { ... }
}
```

**Exception: Slotted components** - Components rendered inside a `<slot>` may not re-render when store state changes. Use a `@State()` trigger with subscriptions:
```tsx
@State() private renderTrigger = 0;
private unsubscribers: (() => void)[] = [];

connectedCallback() {
  const triggerRender = () => { this.renderTrigger++; };
  this.unsubscribers.push(onChange("step", triggerRender));
}
disconnectedCallback() {
  this.unsubscribers.forEach((unsub) => unsub());
}
render() {
  void this.renderTrigger; // Establish dependency
  // ... use authState directly
}
```

## Component Mixins

### UnidyComponent
Base mixin for all components. Accepts additional mixin factories and provides `this.logger` and `this.element`
```tsx
export class MyComponent extends UnidyComponent() { ... }
export class MyComponent extends UnidyComponent(HasSlotContent) { ... }
```

### HasSlotContent
Mixin for slot content detection. Provides `this.hasSlot` (auto-detected in connectedCallback).
