import{r as e,c as t,h as i}from"./p-DFV4WLcx.js";class r{baseUrl;api_key;constructor(e,t){this.baseUrl=e;this.api_key=t;this.api_key=t}async post(e,t){let i=null;try{i=await fetch(`${this.baseUrl}${e}`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${this.api_key}`},body:JSON.stringify(t)});let r;try{r=await i.json()}catch(e){r=null}return{data:r,status:i.status,headers:i.headers,success:i.ok}}catch(e){return{status:i?i.status:e instanceof TypeError?0:500,error:e instanceof Error?e.message:String(e),headers:i?i.headers:new Headers,success:false}}}}function n(e,t){class i{constructor(e){var t;let r=this;i.init(r,e),(t=r._zod).deferred??(t.deferred=[]);for(let e of r._zod.deferred)e()}static init(r,n){var s;r._zod??(r._zod={}),(s=r._zod).traits??(s.traits=new Set),r._zod.traits.add(e),t(r,n);for(let e in i.prototype)Object.defineProperty(r,e,{value:i.prototype[e].bind(r)});r._zod.constr=i,r._zod.def=n}static[Symbol.hasInstance](t){return t?._zod?.traits?.has(e)}}return Object.defineProperty(i,"name",{value:e}),i}class s extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}var o={};function a(e){return o}function l(e,t){if(typeof t==="bigint")return t.toString();return t}function c(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function u(e){let t=e.startsWith("^")?1:0,i=e.endsWith("$")?e.length-1:e.length;return e.slice(t,i)}function f(e,t,i){Object.defineProperty(e,t,{get(){{let r=i();return e[t]=r,r}},set(i){Object.defineProperty(e,t,{value:i})},configurable:true})}function d(e=10){let t="";for(let i=0;i<e;i++)t+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return t}function h(e){return JSON.stringify(e)}function p(e){return typeof e==="object"&&e!==null}var m=c((()=>{try{return new Function(""),true}catch(e){return false}}));function w(e,t){return new e._zod.constr(t)}function b(e){return{}}function v(e){return Object.keys(e).filter((t=>e[t]._zod.qout==="true"))}function y(e,t=0){for(let i=t;i<e.issues.length;i++)if(e.issues[i].continue!==true)return true;return false}function g(e,t){return t.map((t=>{var i;return(i=t).path??(i.path=[]),t.path.unshift(e),t}))}function x(e){return typeof e==="string"?e:e?.message}function _(e,t,i){let r={...e,path:e.path??[]};if(!e.message){let n=x(e.inst?._zod.def?.error?.(e))??x(t?.error?.(e))??x(i.customError?.(e))??x(i.localeError?.(e))??"Invalid input";r.message=n}if(delete r.inst,delete r.continue,!t?.reportInput)delete r.input;return r}var k=Symbol.for("{{zod.error}}");class ${get message(){return JSON.stringify(this.issues,l,2)}constructor(e){Object.defineProperty(this,"_tag",{value:k,enumerable:false}),Object.defineProperty(this,"name",{value:"$ZodError",enumerable:false}),this.issues=e}static[Symbol.hasInstance](e){return e?._tag===k}}function E(e,t,i){let r=i?{...i,async:false}:{async:false},n=e._zod.run({value:t,issues:[]},r);if(n instanceof Promise)throw new s;if(n.issues.length)throw new(this?.Error??$)(n.issues.map((e=>_(e,r,a()))));return n.value}function S(e,t,i){let r=i?{...i,async:false}:{async:false},n=e._zod.run({value:t,issues:[]},r);if(n instanceof Promise)throw new s;return n.issues.length?{success:false,error:new(this?.Error??$)(n.issues.map((e=>_(e,r,a()))))}:{success:true,data:n.value}}async function j(e,t,i){let r=i?{...i,async:true}:{async:true},n=e._zod.run({value:t,issues:[]},r);if(n instanceof Promise)n=await n;if(n.issues.length)throw new(this?.Error??$)(n.issues.map((e=>_(e,r,a()))));return n.value}async function M(e,t,i){let r=i?{...i,async:true}:{async:true},n=e._zod.run({value:t,issues:[]},r);if(n instanceof Promise)n=await n;if(n.issues.length)return{success:false,error:new(this?.Error??$)(n.issues.map((e=>_(e,r,a()))))};return{success:true,data:n.value}}var T=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)};var P=/^-?\d+(?:\.\d+)?/i;var L=/null/i;class N{constructor(e){this.content=[],this.indent=0,this.args=e}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e==="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split(`\n`).filter((e=>e)),i=Math.min(...t.map((e=>e.length-e.trimStart().length))),r=t.map((e=>e.slice(i))).map((e=>" ".repeat(this.indent*2)+e));for(let e of r)this.content.push(e)}compile(){let e=[...this.content.map((e=>`  ${e}`))];return new Function(...this.args,e.join(`\n`))}}var C=n("$ZodType",((e,t)=>{var i;e??(e={}),e._zod.id=t.type+"_"+d(10),e._zod.def=t,e._zod.computed=e._zod.computed||{};let r=[...e._zod.def.checks??[]];if(e._zod.traits.has("$ZodCheck"))r.unshift(e);for(let t of r)t._zod.onattach?.(e);if(r.length===0)(i=e._zod).deferred??(i.deferred=[]),e._zod.deferred?.push((()=>{e._zod.run=e._zod.parse}));else{let t=(e,t,i)=>{let r=y(e),n;for(let o of t){if(o._zod.when){if(!o._zod.when(e))continue}else if(r)continue;let t=e.issues.length,a=o._zod.check(e);if(a instanceof Promise&&i?.async===false)throw new s;if(n||a instanceof Promise)n=n??Promise.resolve(),n.then((async()=>{if(await a,e.issues.length===t)return;if(!r)r=y(e,t)}));else{if(e.issues.length===t)continue;if(!r)r=y(e,t)}}if(n)return n.then((()=>e));return e};e._zod.run=(i,n)=>{let o=e._zod.parse(i,n);if(o instanceof Promise){if(n.async===false)throw new s;return o.then((e=>t(e,r,n)))}return t(o,r,n)}}f(e,"~standard",(()=>({validate:t=>{let i=e._zod.run({value:t,issues:[]},{});if(i instanceof Promise)return i.then((({issues:e,value:t})=>{if(e.length===0)return{value:t};return{issues:e}}));if(i.issues.length===0)return{value:i.value};return{issues:i.issues}},vendor:"zod",version:1})))})),O=n("$ZodString",((e,t)=>{C.init(e,t),e._zod.pattern=e?._zod.computed?.pattern??T(e._zod.computed),e._zod.parse=(i,r)=>{if(t.coerce)try{i.value=String(i.value)}catch(e){}if(typeof i.value==="string")return i;return i.issues.push({expected:"string",code:"invalid_type",input:i.value,inst:e}),i}}));var R=n("$ZodNumber",((e,t)=>{C.init(e,t),e._zod.pattern=e._zod.computed.pattern??P,e._zod.parse=(i,r)=>{if(t.coerce)try{i.value=Number(i.value)}catch(e){}let n=i.value;if(typeof n==="number"&&!Number.isNaN(n)&&Number.isFinite(n))return i;let s=typeof n==="number"?Number.isNaN(n)?"NaN":!Number.isFinite(n)?"Infinity":void 0:void 0;return i.issues.push({expected:"number",code:"invalid_type",input:n,inst:e,...s?{received:s}:{}}),i}}));var z=n("$ZodNull",((e,t)=>{C.init(e,t),e._zod.pattern=L,e._zod.values=new Set([null]),e._zod.parse=(t,i)=>{let{value:r}=t;if(r===null)return t;return t.issues.push({expected:"null",code:"invalid_type",input:r,inst:e}),t}}));function A(e,t,i){if(e.issues.length)t.issues.push(...g(i,e.issues));t.value[i]=e.value}var U=n("$ZodArray",((e,t)=>{C.init(e,t),e._zod.parse=(i,r)=>{let n=i.value;if(!Array.isArray(n))return i.issues.push({expected:"array",code:"invalid_type",input:n,inst:e}),i;i.value=Array(n.length);let s=[];for(let e=0;e<n.length;e++){let o=n[e],a=t.element._zod.run({value:o,issues:[]},r);if(a instanceof Promise)s.push(a.then((t=>A(t,i,e))));else A(a,i,e)}if(s.length)return Promise.all(s).then((()=>i));return i}}));function Z(e,t,i){if(e.issues.length)t.issues.push(...g(i,e.issues));else t.value[i]=e.value}function I(e,t,i,r){if(e.issues.length)if(r[i]===void 0){if(i in r)t.value[i]=void 0}else t.issues.push(...g(i,e.issues));else if(e.value===void 0){if(i in r)t.value[i]=void 0}else t.value[i]=e.value}var F=n("$ZodObjectLike",((e,t)=>{C.init(e,t),f(e._zod,"shape",(()=>t.shape));let i=c((()=>{let e=Object.keys(t.shape);return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(t.optional)}}));f(e._zod,"disc",(()=>{let e=t.shape,i=new Map,r=false;for(let t in e){let n=e[t]._zod;if(n.values||n.disc){r=true;let e={values:new Set(n.values??[]),maps:n.disc?[n.disc]:[]};i.set(t,e)}}if(!r)return;return i}));let r=e=>{let t=new N(["shape","payload","ctx"]),{keys:r,optionalKeys:n}=i.value,s=e=>{let t=h(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let o={};for(let e of r)o[e]=d(15);for(let e of r){if(n.has(e))continue;let i=o[e];t.write(`const ${i} = ${s(e)};`),t.write(`\n          if (${i}.issues.length) payload.issues = payload.issues.concat(${i}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${h(e)}, ...iss.path] : [${h(e)}]\n          })));`)}t.write("payload.value = {"),t.indented((()=>{for(let e of r){if(n.has(e))continue;let i=o[e];t.write(`  ${h(e)}: ${i}.value,`)}})),t.write("}");for(let e of r){if(!n.has(e))continue;let i=o[e];t.write(`const ${i} = ${s(e)};`);let r=h(e);t.write(`\n        if (${i}.issues.length) {\n          if (input[${r}] === undefined) {\n            if (${r} in input) {\n              payload.value[${r}] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ${i}.issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [${r}, ...iss.path] : [${r}],\n              }))\n            );\n          }\n        } else if (${i}.value === undefined) {\n          if (${r} in input) payload.value[${r}] = undefined;\n        } else {\n          payload.value[${r}] = ${i}.value;\n        }  \n        `)}t.write("return payload;");let a=t.compile();return(t,i)=>a(e,t,i)},n,s=m.value,o=p,{catchall:a}=t;e._zod.parse=(l,c)=>{let u=l.value;if(!o(u))return l.issues.push({expected:"object",code:"invalid_type",input:u,inst:e}),l;let f=[];if(s&&c?.async===false&&c.noPrecompilation!==true){if(!n)n=r(t.shape);l=n(l,c)}else{l.value={};let{keys:e,shape:t,optionalKeys:r}=i.value;for(let i of e){let e=t[i]._zod.run({value:u[i],issues:[]},c),n=r.has(i);if(e instanceof Promise)f.push(e.then((e=>n?I(e,l,i,u):Z(e,l,i))));else if(n)I(e,l,i,u);else Z(e,l,i)}}if(!a)return f.length?Promise.all(f).then((()=>l)):l;let d=[];for(let e of Object.keys(u)){if(i.value.keySet.has(e))continue;if(a._zod.def.type==="never"){d.push(e);continue}let t=a._zod.run({value:u[e],issues:[]},c);if(t instanceof Promise)f.push(t.then((t=>Z(t,l,e))));else Z(t,l,e)}if(d.length)l.issues.push({code:"unrecognized_keys",keys:d,input:u,inst:e});if(!f.length)return l;return Promise.all(f).then((()=>l))}}));var J=n("$ZodObject",((e,t)=>{F.init(e,t)}));function W(e,t,i,r){for(let i of e)if(i.issues.length===0)return t.value=i.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:i,errors:e.map((e=>e.issues.map((e=>_(e,r,a())))))}),t}var K=n("$ZodUnion",((e,t)=>{C.init(e,t);let i=new Set;if(t.options.every((e=>e._zod.values))){for(let e of t.options)for(let t of e._zod.values)i.add(t);e._zod.values=i}if(t.options.every((e=>e._zod.pattern))){let i=t.options.map((e=>e._zod.pattern));e._zod.pattern=new RegExp(`^(${i.map((e=>u(e.source))).join("|")})$`)}e._zod.parse=(i,r)=>{let n=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},r);if(t instanceof Promise)n.push(t);else{if(t.issues.length===0)return t;n.push(t)}}return W(n,i,e,r)}}));var q=n("$ZodOptional",((e,t)=>{if(C.init(e,t),e._zod.qout="true",t.innerType._zod.values)e._zod.values=new Set([...t.innerType._zod.values,void 0]);let i=t.innerType._zod.pattern;if(i)e._zod.pattern=new RegExp(`^(${u(i.source)})?$`);e._zod.parse=(e,i)=>{if(e.value===void 0)return e;return t.innerType._zod.run(e,i)}}));function B(e,t){return new e({type:"string",...b()})}function D(e,t){return new e({type:"number",checks:[],...b()})}function Y(e,t){return new e({type:"null",...b()})}var G=E.bind({Error:$}),V=S.bind({Error:$}),H=j.bind({Error:$}),Q=M.bind({Error:$});var X=n("ZodMiniType",((e,t)=>{if(!e._zod)throw new Error("Uninitialized schema in mixin ZodMiniType.");C.init(e,t),e.def=t,e.parse=(t,i)=>G(e,t,i),e.safeParse=(t,i)=>V(e,t,i),e.parseAsync=async(t,i)=>H(e,t,i),e.safeParseAsync=async(t,i)=>Q(e,t,i),e.check=(...i)=>e.clone({...t,checks:[...t.checks??[],...i.map((e=>typeof e==="function"?{_zod:{check:e,def:{check:"custom"}}}:e))]}),e.clone=i=>w(e,i??t),e.brand=()=>e,e.register=(t,i)=>(t.add(e,i),e)})),ee=n("ZodMiniString",((e,t)=>{O.init(e,t),X.init(e,t)}));function te(e){return B(ee)}var ie=n("ZodMiniNumber",((e,t)=>{R.init(e,t),X.init(e,t)}));function re(e){return D(ie)}var ne=n("ZodMiniNull",((e,t)=>{z.init(e,t),X.init(e,t)}));function se(e){return Y(ne)}var oe=n("ZodMiniArray",((e,t)=>{U.init(e,t),X.init(e,t)}));function ae(e,t){return new oe({type:"array",element:e,...b()})}var le=n("ZodMiniObject",((e,t)=>{J.init(e,t),X.init(e,t)}));function ce(e,t){let i={type:"object",shape:e??{},get optional(){return v(e??{})},...b()};return new le(i)}var ue=n("ZodMiniUnion",((e,t)=>{K.init(e,t),X.init(e,t)}));function fe(e,t){return new ue({type:"union",options:e,...b()})}var de=n("ZodMiniOptional",((e,t)=>{q.init(e,t),X.init(e,t)}));function he(e,t){return new de({type:"optional",innerType:e,...b()})}var pe=Symbol.for,me=Symbol("kCapture"),we=pe("events.errorMonitor"),be=Symbol("events.maxEventTargetListeners"),ve=Symbol("events.maxEventTargetListenersWarned"),ye=pe("nodejs.rejection"),ge=pe("nodejs.rejection"),xe=Array.prototype.slice,_e=10,ke=function e(t){if(this._events===void 0||this._events===this.__proto__._events)this._events={__proto__:null},this._eventsCount=0;if(this._maxListeners??=void 0,this[me]=t?.captureRejections?Boolean(t?.captureRejections):$e[me])this.emit=Te},$e=ke.prototype={};$e._events=void 0;$e._eventsCount=0;$e._maxListeners=void 0;$e.setMaxListeners=function e(t){return Je(t,"setMaxListeners",0),this._maxListeners=t,this};$e.constructor=ke;$e.getMaxListeners=function e(){return this?._maxListeners??_e};function Ee(e,t){var{_events:i}=e;if(t[0]??=new Error("Unhandled error."),!i)throw t[0];var r=i[we];if(r)for(var n of xe.call(r))n.apply(e,t);var s=i.error;if(!s)throw t[0];for(var n of xe.call(s))n.apply(e,t);return true}function Se(e,t,i,r){t.then(void 0,(function(t){queueMicrotask((()=>je(e,t,i,r)))}))}function je(e,t,i,r){if(typeof e[ye]==="function")e[ye](t,i,...r);else try{e[me]=false,e.emit("error",t)}finally{e[me]=true}}var Me=function e(t,...i){if(t==="error")return Ee(this,i);var{_events:r}=this;if(r===void 0)return false;var n=r[t];if(n===void 0)return false;let s=n.length>1?n.slice():n;for(let e=0,{length:t}=s;e<t;e++){let t=s[e];switch(i.length){case 0:t.call(this);break;case 1:t.call(this,i[0]);break;case 2:t.call(this,i[0],i[1]);break;case 3:t.call(this,i[0],i[1],i[2]);break;default:t.apply(this,i);break}}return true},Te=function e(t,...i){if(t==="error")return Ee(this,i);var{_events:r}=this;if(r===void 0)return false;var n=r[t];if(n===void 0)return false;let s=n.length>1?n.slice():n;for(let e=0,{length:r}=s;e<r;e++){let r=s[e],n;switch(i.length){case 0:n=r.call(this);break;case 1:n=r.call(this,i[0]);break;case 2:n=r.call(this,i[0],i[1]);break;case 3:n=r.call(this,i[0],i[1],i[2]);break;default:n=r.apply(this,i);break}if(n!==void 0&&typeof n?.then==="function"&&n.then===Promise.prototype.then)Se(this,n,t,i)}return true};$e.emit=Me;$e.addListener=function e(t,i){We(i);var r=this._events;if(!r)r=this._events={__proto__:null},this._eventsCount=0;else if(r.newListener)this.emit("newListener",t,i.listener??i);var n=r[t];if(!n)r[t]=[i],this._eventsCount++;else{n.push(i);var s=this._maxListeners??_e;if(s>0&&n.length>s&&!n.warned)Pe(this,t,n)}return this};$e.on=$e.addListener;$e.prependListener=function e(t,i){We(i);var r=this._events;if(!r)r=this._events={__proto__:null},this._eventsCount=0;else if(r.newListener)this.emit("newListener",t,i.listener??i);var n=r[t];if(!n)r[t]=[i],this._eventsCount++;else{n.unshift(i);var s=this._maxListeners??_e;if(s>0&&n.length>s&&!n.warned)Pe(this,t,n)}return this};function Pe(e,t,i){i.warned=true;let r=new Error(`Possible EventEmitter memory leak detected. ${i.length} ${String(t)} listeners added to [${e.constructor.name}]. Use emitter.setMaxListeners() to increase limit`);r.name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=i.length,console.warn(r)}function Le(e,t,...i){this.removeListener(e,t),t.apply(this,i)}$e.once=function e(t,i){We(i);let r=Le.bind(this,t,i);return r.listener=i,this.addListener(t,r),this};$e.prependOnceListener=function e(t,i){We(i);let r=Le.bind(this,t,i);return r.listener=i,this.prependListener(t,r),this};$e.removeListener=function e(t,i){We(i);var{_events:r}=this;if(!r)return this;var n=r[t];if(!n)return this;var s=n.length;let o=-1;for(let e=s-1;e>=0;e--)if(n[e]===i||n[e].listener===i){o=e;break}if(o<0)return this;if(o===0)n.shift();else n.splice(o,1);if(n.length===0)delete r[t],this._eventsCount--;return this};$e.off=$e.removeListener;$e.removeAllListeners=function e(t){var{_events:i}=this;if(t&&i){if(i[t])delete i[t],this._eventsCount--}else this._events={__proto__:null};return this};$e.listeners=function e(t){var{_events:i}=this;if(!i)return[];var r=i[t];if(!r)return[];return r.map((e=>e.listener??e))};$e.rawListeners=function e(t){var{_events:i}=this;if(!i)return[];var r=i[t];if(!r)return[];return r.slice()};$e.listenerCount=function e(t){var{_events:i}=this;if(!i)return 0;return i[t]?.length??0};$e.eventNames=function e(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};$e[me]=false;function Ne(e,t,i){var r=i?.signal;if(Fe(r,"options.signal"),r?.aborted)throw new Ue(void 0,{cause:r?.reason});let{resolve:n,reject:s,promise:o}=$newPromiseCapability(Promise),a=i=>{if(e.removeListener(t,l),r!=null)ze(r,"abort",c);s(i)},l=(...t)=>{if(typeof e.removeListener==="function")e.removeListener("error",a);if(r!=null)ze(r,"abort",c);n(t)};if(Ae(e,t,l,{once:true}),t!=="error"&&typeof e.once==="function")e.once("error",a);function c(){ze(e,t,l),ze(e,"error",a),s(new Ue(void 0,{cause:r?.reason}))}if(r!=null)Ae(r,"abort",c,{once:true});return o}function Ce(e,t){return e.listeners(t)}function Oe(e,...t){Je(e,"setMaxListeners",0);var i;if(t&&(i=t.length))for(let r=0;r<i;r++)t[r].setMaxListeners(e);else _e=e}function Re(e,t){return e.listenerCount(t)}function ze(e,t,i,r){if(typeof e.removeListener==="function")e.removeListener(t,i);else e.removeEventListener(t,i,r)}function Ae(e,t,i,r){if(typeof e.on==="function")if(r.once)e.once(t,i);else e.on(t,i);else e.addEventListener(t,i,r)}class Ue extends Error{constructor(e="The operation was aborted",t=void 0){if(t!==void 0&&typeof t!=="object")throw Ze("options","Object",t);super(e,t);this.code="ABORT_ERR",this.name="AbortError"}}function Ze(e,t,i){let r=new TypeError(`The "${e}" argument must be of type ${t}. Received ${i}`);return r.code="ERR_INVALID_ARG_TYPE",r}function Ie(e,t,i){let r=new RangeError(`The "${e}" argument is out of range. It must be ${t}. Received ${i}`);return r.code="ERR_OUT_OF_RANGE",r}function Fe(e,t){if(e!==void 0&&(e===null||typeof e!=="object"||!("aborted"in e)))throw Ze(t,"AbortSignal",e)}function Je(e,t,i,r){if(typeof e!=="number")throw Ze(t,"number",e);if(e<i||r!=null||Number.isNaN(e))throw Ie(t,`${`>= ${i}`}${""}${""}`,e)}function We(e){if(typeof e!=="function")throw new TypeError("The listener must be a function")}function Ke(e,t){if(typeof e!=="boolean")throw Ze(t,"boolean",e)}function qe(e){return e?._maxListeners??_e}function Be(e,t){if(e===void 0)throw Ze("signal","AbortSignal",e);if(Fe(e,"signal"),typeof t!=="function")throw Ze("listener","function",t);let i;if(e.aborted)queueMicrotask((()=>t()));else e.addEventListener("abort",t,{__proto__:null,once:true}),i=()=>{e.removeEventListener("abort",t)};return{__proto__:null,[Symbol.dispose](){i?.()}}}Object.defineProperties(ke,{captureRejections:{get(){return $e[me]},set(e){Ke(e,"EventEmitter.captureRejections"),$e[me]=e},enumerable:true},defaultMaxListeners:{enumerable:true,get:()=>_e,set:e=>{Je(e,"defaultMaxListeners",0),_e=e}},kMaxEventTargetListeners:{value:be,enumerable:false,configurable:false,writable:false},kMaxEventTargetListenersWarned:{value:ve,enumerable:false,configurable:false,writable:false}});Object.assign(ke,{once:Ne,getEventListeners:Ce,getMaxListeners:qe,setMaxListeners:Oe,EventEmitter:ke,usingDomains:false,captureRejectionSymbol:ge,errorMonitor:we,addAbortListener:Be,init:ke,listenerCount:Re});var De=ce({id:re(),email:te(),newsletter_internal_name:te(),preference_identifiers:ae(te()),preference_token:te(),confirmed_at:fe([te(),se()])}),Ye=ce({newsletter_internal_name:te(),error_identifier:te()}),Ge=ce({results:ae(De),errors:ae(Ye)}),Ve=ce({email:te(),newsletter_subscriptions:ae(ce({newsletter_internal_name:te(),preference_identifiers:he(ae(te()))})),return_to_after_confirmation:he(te())});class He extends ke{client;constructor(e){super();this.client=e}async createSubscriptions(e){Ve.parse(e);let t=await this.client.post("/api/sdk/v1/newsletter_subscriptions",e);switch(t.status){case 429:return this.emit("rate_limit_exceeded",t),["rate_limit_exceeded",t];case 500:return["server_error",t];case 0:return["network_error",t];default:if(t.data)try{if(Ge.parse(t.data).errors.length>0)return this.emit("newsletter_error",t),["newsletter_error",t];return[null,t]}catch(e){return["schema_validation_error",t]}return["error",t]}}onError(e,t){this.on("newsletter_error",(i=>{if(!i.data.errors)return;let r=t?i.data.errors.filter((e=>e.error_identifier===t)):i.data.errors;if(r.length>0)e(r)}))}onRateLimitError(e){this.on("rate_limit_exceeded",(t=>{if(t.status===429)e()}))}}class Qe{apiClient;newsletters;constructor(e,t){this.apiClient=new r(e,t),this.newsletters=new He(this.apiClient)}}const Xe='/*! tailwindcss v4.1.7 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,::backdrop,:after,:before{--tw-border-style:solid;--tw-font-weight:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000}}}@layer theme{:host,:root{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--spacing:.25rem;--container-lg:32rem;--text-lg:1.125rem;--text-lg--line-height:1.55556;--font-weight-medium:500;--font-weight-bold:700;--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,::backdrop,:after,:before{border:0 solid;box-sizing:border-box;margin:0;padding:0}::file-selector-button{appearance:button;background-color:#0000;border:0 solid;border-radius:0;box-sizing:border-box;color:inherit;font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;margin:0;margin-inline-end:4px;opacity:1;padding:0}:host,html{-webkit-text-size-adjust:100%;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);line-height:1.5;tab-size:4;-webkit-tap-highlight-color:transparent}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-size:1em;font-variation-settings:var(--default-mono-font-variation-settings,normal)}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}menu,ol,ul{list-style:none}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}button,input,optgroup,select,textarea{background-color:#0000;border-radius:0;color:inherit;font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;opacity:1}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex;padding-block:0}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field,::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-meridiem-field,::-webkit-datetime-edit-millisecond-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.container{width:100%}.mr-2{margin-right:calc(var(--spacing)*2)}.ml-2{margin-left:calc(var(--spacing)*2)}.flex{display:flex}.w-full{width:100%}.max-w-lg{max-width:var(--container-lg)}.flex-col{flex-direction:column}.items-center{align-items:center}.gap-2{gap:calc(var(--spacing)*2)}.border{border-style:var(--tw-border-style);border-width:1px}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.shadow{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}} /*! tailwindcss v4.1.7 | MIT License | https://tailwindcss.com */@layer properties{}@layer base{}@layer components;:host{--tw-border-style:solid;display:block}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}';const et=class{constructor(i){e(this,i);this.successEvent=t(this,"on:success");this.errorEvent=t(this,"on:error");this.resetStatus=t(this,"resetStatus")}header;newslettersConfig=[];newslettersConfigJson;submitButtonText="Subscribe";emailLabel="Email";emailPlaceholder="Email";apiUrl;apiKey;returnToAfterConfirmation;renderErrorMessages=false;errorUnconfirmedText="Email not confirmed";errorAlreadySubscribedText="Already subscribed";errorInvalidEmailText="Invalid email address";errorNewsletterNotFoundText="Newsletter not found";errorPreferenceNotFoundText="Preference not found";errorUnknownText="Unknown error occured";successConfirmationText="You have successfully confirmed your newsletter subscription.";confirmationErrorText="Your preference token could not be assigned. Enter your e-mail address to receive a new link.";email="";checkedNewsletters={};errors={};showSubscribeSuccessSlot=false;showConfirmSuccessSlot=false;showConfirmationErrorSlot=false;successEvent;errorEvent;resetStatus;client;componentWillLoad(){this.client=new Qe(this.apiUrl,this.apiKey);if(this.newslettersConfigJson){try{this.newslettersConfig=JSON.parse(this.newslettersConfigJson)}catch(e){console.error("Failed to parse newslettersConfigJson:",e)}}this.checkedNewsletters=this.newslettersConfig.reduce(((e,t)=>{e[t.internalName]={preferences:t.preferences?.filter((e=>e.checked)).map((e=>e.internalName))||[],checked:t.checked};return e}),{});const e=new URLSearchParams(window.location.search);const t=e.get("newsletter_error");const i=e.get("selected");if(t){this.handleConfirmationError()}else if(i){this.handleConfirmationSuccess()}}handleConfirmationError(){this.showConfirmSuccessSlot=false;this.showSubscribeSuccessSlot=false;this.showConfirmationErrorSlot=true;setTimeout((()=>{this.resetStatus.emit();const e=new URL(window.location.href);e.searchParams.delete("newsletter_error");window.history.replaceState({},document.title,e.pathname+e.search)}),5e3)}handleConfirmationSuccess(){this.showConfirmSuccessSlot=true;this.showSubscribeSuccessSlot=false;setTimeout((()=>{this.showConfirmSuccessSlot=false;this.resetStatus.emit()}),5e3)}buildReturnUrlWithoutConfirmedParams(){const e=`${location.origin}${location.pathname}`;const t=new URLSearchParams(location.search);for(const e of["email","selected"]){t.delete(e)}const i=t.toString();return i?`${e}?${i}`:e}handleSubmit=async e=>{e.preventDefault();this.errors={};this.showSubscribeSuccessSlot=false;const t={email:this.email,newsletter_subscriptions:[],return_to_after_confirmation:this.returnToAfterConfirmation||this.buildReturnUrlWithoutConfirmedParams()};const i=Object.entries(this.checkedNewsletters).filter((([e,t])=>t.checked)).map((([e,t])=>({newsletter_internal_name:e,preference_identifiers:t.preferences})));if(i.length===0){console.error("No newsletters selected: please select at least one newsletter");return}t.newsletter_subscriptions=i;const[r,n]=await this.client.newsletters.createSubscriptions(t);if(r){if(r==="newsletter_error"){const e=n.data?.errors||[];this.errorEvent.emit(e);const t={};for(const i of e){t[i.newsletter_internal_name]={error_identifier:i.error_identifier}}this.errors={...this.errors,...t};return}if(r==="rate_limit_exceeded"){alert("Rate limit exceeded. Please try again later.")}}else{this.showSubscribeSuccessSlot=true;this.successEvent.emit(n.data.results)}this.email=""};getErrorText(e){switch(e){case"unconfirmed":return this.errorUnconfirmedText;case"already_subscribed":return this.errorAlreadySubscribedText;case"invalid_email":return this.errorInvalidEmailText;case"newsletter_not_found":return this.errorNewsletterNotFoundText;case"preferences_not_found":return this.errorPreferenceNotFoundText;default:return this.errorUnknownText}}toggleNewsletter(e){const t=this.checkedNewsletters[e];const i=!t.checked;this.checkedNewsletters={...this.checkedNewsletters,[e]:{...t,checked:i,preferences:i?t.preferences:[]}}}togglePreference(e,t){const i=this.checkedNewsletters[e];if(!i||!i.checked)return;const r=i.preferences||[];const n=r.includes(t);const s=n?r.filter((e=>e!==t)):[...r,t];this.checkedNewsletters={...this.checkedNewsletters,[e]:{...i,preferences:s}}}renderErrorMessage(e){if(!this.renderErrorMessages||!this.errors[e]){return null}const t=this.errors[e];return i("div",{key:`error-${e}-${t.error_identifier}`,part:`error-message ${t.error_identifier}`,class:`${t.error_identifier}`},this.getErrorText(t.error_identifier))}render(){return i("div",{key:"43176469ff9ef2045b95756e4b8a237e8616cbd3",part:"container",class:"max-w-lg"},i("slot",{key:"a1e0e7700e419bf42c74a79379a112daa68a7044",name:"header"}),this.header&&i("h1",{key:"f818dfc5b8b19bb8654bf6f902ad6030db846358",part:"heading"},this.header),i("slot",{key:"c6d4150591457ab523cde371f706bedeb274e8f2",name:"description"}),i("form",{key:"2544c28d9af96413b42b5ff8fc8a80174da6c0b1",onSubmit:this.handleSubmit,class:"flex flex-col gap-2"},i("div",{key:"c252e080cdcbb2ab4c7487461ed76407195779ea",part:"email-input-group"},i("label",{key:"d2c741aa3ebb4353632daa19a909e81b9d885524",part:"email-input-label",htmlFor:"email-input"},this.emailLabel),i("input",{key:"b5fddd8db033b35ee4ac3dea08e2b24fc459eea9",id:"email-input",type:"email",part:"email-input",required:true,placeholder:this.emailPlaceholder,value:this.email,onInput:e=>{this.email=e.target.value},class:"w-full border"})),(this.newslettersConfig.length>1||this.newslettersConfig[0].preferences?.length>0)&&this.newslettersConfig.map((e=>i("div",{key:e.internalName,class:"flex flex-col gap-2",part:"newsletter-container"},this.newslettersConfig.length>1&&i("div",{class:"flex items-center gap-2"},i("label",{class:"font-bold text-lg",htmlFor:e.internalName,part:"newsletter-label"},e.label),i("input",{type:"checkbox",id:e.internalName,value:e.internalName,checked:this.checkedNewsletters[e.internalName].checked,onChange:()=>this.toggleNewsletter(e.internalName),part:"newsletter-checkbox"})),e.preferences&&this.checkedNewsletters[e.internalName].checked&&i("div",{class:`${this.newslettersConfig.length>1?"ml-2":""}`,part:"newsletter-preferences-container"},e.preferences.map((t=>i("label",{key:t.internalName,class:"flex items-center",part:"newsletter-preference-label"},i("input",{type:"checkbox",id:`${e.internalName}-${t.internalName}`,value:t.internalName,checked:this.checkedNewsletters[e.internalName]?.preferences.includes(t.internalName),onChange:()=>this.togglePreference(e.internalName,t.internalName),class:"mr-2",part:"newsletter-preference-checkbox"}),i("span",{class:"font-medium"},t.label))))),this.renderErrorMessage(e.internalName)))),this.newslettersConfig.length===1&&!this.newslettersConfig[0].preferences?.length&&this.renderErrorMessage(this.newslettersConfig[0].internalName),i("button",{key:"dd13f624386a555c0039435eecc2928763f1aad8",part:"submit-button",type:"submit",class:"w-full border"},this.submitButtonText),this.showSubscribeSuccessSlot&&i("slot",{key:"f1f6988ef6ea86894996cf48aea909fadf3b2bff",name:"success-container"}),this.showConfirmSuccessSlot&&i("slot",{key:"307d5a06faf15a6000fb51fe7f751900da594f5f",name:"confirm-success-container"},i("p",{key:"9099f6dbf9eee890c397bd07d31853a2b19c8b4c",part:"confirm-success-text"},this.successConfirmationText)),this.showConfirmationErrorSlot&&i("slot",{key:"35203be2f4001c75c9cb432908355ccbd55df5d7",name:"confirmation-error-container"},i("p",{key:"1cd6389eaba460eb8424b538231b256b2485b7cf",part:"confirmaton-error-text"},this.confirmationErrorText))),i("slot",{key:"89bdccc83131cdf0d8bc38c9a4e997d7755df81e",name:"footer"}))}};et.style=Xe;export{et as unidy_newsletter};